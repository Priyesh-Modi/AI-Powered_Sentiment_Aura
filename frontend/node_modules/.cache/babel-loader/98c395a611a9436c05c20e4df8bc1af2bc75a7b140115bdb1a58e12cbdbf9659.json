{"ast":null,"code":"var _jsxFileName = \"/Users/priyeshmodi/Downloads/sentiment-aura/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useCallback } from 'react';\nimport { createClient, LiveTranscriptionEvents } from '@deepgram/sdk';\nimport axios from 'axios';\nimport AuraVisualization from './components/AuraVisualization';\nimport TranscriptDisplay from './components/TranscriptDisplay';\nimport KeywordsDisplay from './components/KeywordsDisplay';\nimport Controls from './components/Controls';\nimport './styles/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEEPGRAM_API_KEY = process.env.REACT_APP_DEEPGRAM_API_KEY;\nconsole.log('Deepgram API Key:', DEEPGRAM_API_KEY); // Debug line\nconst BACKEND_URL = 'http://localhost:8000';\nfunction App() {\n  _s();\n  // State management\n  const [isRecording, setIsRecording] = useState(false);\n  const [transcript, setTranscript] = useState([]);\n  const [currentText, setCurrentText] = useState('');\n  const [sentiment, setSentiment] = useState(0);\n  const [keywords, setKeywords] = useState([]);\n  const [emotion, setEmotion] = useState('neutral');\n  const [energy, setEnergy] = useState(0.5);\n  const [colorPalette, setColorPalette] = useState(['#4A90E2', '#50C878', '#FFB347']);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  // Refs for media handling\n  const mediaRecorderRef = useRef(null);\n  const deepgramRef = useRef(null);\n  const streamRef = useRef(null);\n  const speechRecognitionRef = useRef(null); // Add ref for speech recognition\n\n  // Process text with backend AI\n  const processText = useCallback(async text => {\n    if (!text.trim() || isProcessing) return;\n    console.log('Processing text with backend:', text); // Debug line\n    setIsProcessing(true);\n    try {\n      const response = await axios.post(`${BACKEND_URL}/process_text`, {\n        text: text,\n        provider: 'openai' // or 'anthropic'\n      });\n      const data = response.data;\n      console.log('Backend response:', data); // Debug line\n      setSentiment(data.sentiment);\n      setKeywords(data.keywords);\n      setEmotion(data.emotion);\n      setEnergy(data.energy);\n      setColorPalette(data.color_palette);\n    } catch (error) {\n      console.error('Error processing text:', error);\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [isProcessing]);\n\n  // Start recording and transcription\n  const startRecording = useCallback(async () => {\n    console.log('Starting recording...'); // Debug line\n\n    // Try browser's built-in Speech Recognition as fallback\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      console.log('ðŸŽ¤ Using browser Speech Recognition API');\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      const recognition = new SpeechRecognition();\n      recognition.continuous = true;\n      recognition.interimResults = true;\n      recognition.lang = 'en-US';\n      recognition.onstart = () => {\n        console.log('ðŸŽ¬ Speech recognition started');\n        setIsRecording(true);\n      };\n      recognition.onresult = event => {\n        console.log('ðŸŽ¯ Speech recognition result:', event);\n        let interimTranscript = '';\n        let finalTranscript = '';\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n            console.log('âœ… Final transcript:', transcript);\n            setTranscript(prev => [...prev, transcript]);\n            processText(transcript);\n          } else {\n            interimTranscript += transcript;\n            console.log('ðŸ“ Interim transcript:', transcript);\n            setCurrentText(interimTranscript);\n          }\n        }\n      };\n      recognition.onerror = event => {\n        console.error('âŒ Speech recognition error:', event.error);\n      };\n      recognition.onend = () => {\n        console.log('ðŸ”Œ Speech recognition ended');\n        setIsRecording(false);\n        setCurrentText('');\n      };\n      recognition.start();\n      speechRecognitionRef.current = recognition; // Store reference\n      return;\n    }\n\n    // Fallback to Deepgram if browser doesn't support Speech Recognition\n    try {\n      // Get microphone access with different settings\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          sampleRate: 48000,\n          // Try higher sample rate\n          channelCount: 1,\n          echoCancellation: false,\n          // Turn off processing that might interfere\n          noiseSuppression: false,\n          autoGainControl: false\n        }\n      });\n      console.log('Got microphone access:', stream); // Debug line\n      console.log('Audio tracks:', stream.getAudioTracks()); // Check audio tracks\n      stream.getAudioTracks().forEach(track => {\n        console.log('Track settings:', track.getSettings());\n        console.log('Track constraints:', track.getConstraints());\n      });\n      streamRef.current = stream;\n\n      // Initialize Deepgram client\n      const deepgram = createClient(DEEPGRAM_API_KEY);\n\n      // Try different Deepgram settings\n      const dgConnection = deepgram.listen.live({\n        model: 'nova-2-general',\n        language: 'en-US',\n        interim_results: true,\n        smart_format: true,\n        punctuate: true,\n        endpointing: 300,\n        // Longer endpointing - let you finish speaking\n        vad_events: true,\n        sample_rate: 48000,\n        encoding: 'linear16',\n        multichannel: false,\n        // Ensure single channel\n        alternatives: 1,\n        // Just one alternative\n        profanity_filter: false,\n        // No filtering\n        redact: false,\n        // No redaction\n        diarize: false,\n        // No speaker separation\n        filler_words: false,\n        // No filler word removal\n        utterance_end_ms: 1000 // Wait 1 second before finalizing\n      });\n      console.log('Created Deepgram connection with new settings'); // Debug line\n\n      deepgramRef.current = dgConnection;\n\n      // Set up Deepgram event listeners with more comprehensive logging\n      dgConnection.on(LiveTranscriptionEvents.Open, () => {\n        console.log('âœ… Deepgram connection opened successfully');\n        console.log('Connection ready state:', dgConnection.getReadyState());\n      });\n      dgConnection.on(LiveTranscriptionEvents.Transcript, data => {\n        console.log('ðŸŽ¯ RAW transcript event received:', JSON.stringify(data, null, 2));\n\n        // More robust data parsing\n        try {\n          if (data && data.channel && data.channel.alternatives) {\n            const alternatives = data.channel.alternatives;\n            console.log('Number of alternatives:', alternatives.length);\n            if (alternatives.length > 0 && alternatives[0].transcript) {\n              const transcript = alternatives[0].transcript;\n              const confidence = alternatives[0].confidence || 0;\n              console.log('ðŸ“ Transcript text:', transcript);\n              console.log('ðŸŽ¯ Confidence:', confidence);\n              console.log('âœ… Is final:', data.is_final);\n              console.log('â±ï¸ Duration:', data.duration);\n              if (transcript && transcript.trim() !== '') {\n                console.log('âœ… Valid transcript found, updating UI');\n                setCurrentText(transcript);\n\n                // If this is a final transcript, add to history and process\n                if (data.is_final) {\n                  console.log('ðŸŽ‰ Final transcript, processing:', transcript);\n                  setTranscript(prev => [...prev, transcript]);\n                  processText(transcript);\n                  setCurrentText('');\n                }\n              } else {\n                console.log('âš ï¸ Transcript is empty or whitespace');\n              }\n            } else {\n              console.log('âš ï¸ No alternatives or transcript in response');\n            }\n          } else {\n            console.log('âŒ Invalid data structure:', data);\n          }\n        } catch (parseError) {\n          console.error('âŒ Error parsing transcript data:', parseError);\n        }\n      });\n      dgConnection.on(LiveTranscriptionEvents.Error, error => {\n        console.error('âŒ Deepgram error event:', error);\n      });\n      dgConnection.on(LiveTranscriptionEvents.Warning, warning => {\n        console.warn('âš ï¸ Deepgram warning:', warning);\n      });\n      dgConnection.on(LiveTranscriptionEvents.Metadata, metadata => {\n        console.log('â„¹ï¸ Deepgram metadata:', metadata);\n      });\n      dgConnection.on(LiveTranscriptionEvents.SpeechStarted, () => {\n        console.log('ðŸ—£ï¸ Speech started detected');\n      });\n      dgConnection.on(LiveTranscriptionEvents.UtteranceEnd, () => {\n        console.log('ðŸ”š Utterance ended');\n      });\n      dgConnection.on(LiveTranscriptionEvents.Close, () => {\n        console.log('ðŸ”Œ Deepgram connection closed');\n      });\n\n      // Set up MediaRecorder with different settings\n      let mediaRecorder;\n      try {\n        // Try different MIME types in order of preference\n        const mimeTypes = ['audio/webm;codecs=opus', 'audio/webm;codecs=pcm', 'audio/webm', 'audio/ogg;codecs=opus', 'audio/wav'];\n        let selectedMimeType = null;\n        for (const mimeType of mimeTypes) {\n          if (MediaRecorder.isTypeSupported(mimeType)) {\n            selectedMimeType = mimeType;\n            console.log('âœ… Using MIME type:', mimeType);\n            break;\n          }\n        }\n        mediaRecorder = new MediaRecorder(stream, {\n          mimeType: selectedMimeType,\n          audioBitsPerSecond: 128000\n        });\n      } catch (error) {\n        console.log('âš ï¸ Falling back to default MediaRecorder settings');\n        mediaRecorder = new MediaRecorder(stream);\n      }\n      console.log('ðŸŽ™ï¸ Created MediaRecorder:', mediaRecorder);\n      console.log('ðŸ“Š MediaRecorder MIME type:', mediaRecorder.mimeType);\n      mediaRecorderRef.current = mediaRecorder;\n      mediaRecorder.ondataavailable = event => {\n        const size = event.data.size;\n        const readyState = dgConnection.getReadyState();\n        console.log(`ðŸ“Š Audio data: ${size} bytes, connection state: ${readyState}`);\n        if (size > 0 && readyState === 1) {\n          console.log('ðŸ“¤ Sending audio data to Deepgram');\n          dgConnection.send(event.data);\n        } else if (size === 0) {\n          console.log('âš ï¸ Received empty audio data');\n        } else if (readyState !== 1) {\n          console.log('âš ï¸ Deepgram not ready, buffering data');\n        }\n      };\n      mediaRecorder.onerror = error => {\n        console.error('âŒ MediaRecorder error:', error);\n      };\n      mediaRecorder.onstart = () => {\n        console.log('ðŸŽ¬ MediaRecorder started');\n      };\n      mediaRecorder.onstop = () => {\n        console.log('ðŸ›‘ MediaRecorder stopped');\n      };\n\n      // Start recording with shorter intervals for more responsive streaming\n      mediaRecorder.start(50); // Send data every 50ms instead of 100ms\n      console.log('ðŸŽ™ï¸ MediaRecorder started with 50ms intervals');\n      setIsRecording(true);\n    } catch (error) {\n      console.error('âŒ Error starting recording:', error);\n      alert('Error accessing microphone. Please check permissions.');\n    }\n  }, [processText]);\n\n  // Stop recording and cleanup\n  const stopRecording = useCallback(() => {\n    console.log('ðŸ›‘ Stopping recording...');\n\n    // Stop browser Speech Recognition if it's running\n    if (speechRecognitionRef.current) {\n      console.log('ðŸ”‡ Stopping Speech Recognition');\n      speechRecognitionRef.current.stop();\n      speechRecognitionRef.current = null;\n    }\n\n    // Stop Deepgram recording if it's running\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      mediaRecorderRef.current.stop();\n    }\n    if (deepgramRef.current) {\n      deepgramRef.current.finish();\n    }\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => {\n        track.stop();\n        console.log('ðŸ”‡ Stopped audio track');\n      });\n    }\n    setIsRecording(false);\n    setCurrentText('');\n  }, []);\n\n  // Clear all data\n  const clearData = useCallback(() => {\n    console.log('ðŸ§¹ Clearing all data');\n    setTranscript([]);\n    setCurrentText('');\n    setSentiment(0);\n    setKeywords([]);\n    setEmotion('neutral');\n    setEnergy(0.5);\n    setColorPalette(['#4A90E2', '#50C878', '#FFB347']);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(AuraVisualization, {\n      sentiment: sentiment,\n      energy: energy,\n      emotion: emotion,\n      colorPalette: colorPalette,\n      keywords: keywords\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ui-overlay\",\n      children: [/*#__PURE__*/_jsxDEV(Controls, {\n        isRecording: isRecording,\n        isProcessing: isProcessing,\n        onStart: startRecording,\n        onStop: stopRecording,\n        onClear: clearData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TranscriptDisplay, {\n        transcript: transcript,\n        currentText: currentText,\n        sentiment: sentiment,\n        emotion: emotion\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(KeywordsDisplay, {\n        keywords: keywords,\n        emotion: emotion,\n        energy: energy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sentiment-meter\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-label\",\n            children: \"Sentiment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meter-fill\",\n              style: {\n                width: `${(sentiment + 1) / 2 * 100}%`,\n                backgroundColor: sentiment > 0 ? '#4CAF50' : sentiment < 0 ? '#F44336' : '#FFC107'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-value\",\n            children: [(sentiment * 100).toFixed(0), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"energy-meter\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-label\",\n            children: \"Energy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meter-fill\",\n              style: {\n                width: `${energy * 100}%`,\n                backgroundColor: `hsl(${energy * 120}, 70%, 50%)`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meter-value\",\n            children: [(energy * 100).toFixed(0), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"hL4X5FVAzytqkH3GaXwU8F0zLUk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useCallback","createClient","LiveTranscriptionEvents","axios","AuraVisualization","TranscriptDisplay","KeywordsDisplay","Controls","jsxDEV","_jsxDEV","DEEPGRAM_API_KEY","process","env","REACT_APP_DEEPGRAM_API_KEY","console","log","BACKEND_URL","App","_s","isRecording","setIsRecording","transcript","setTranscript","currentText","setCurrentText","sentiment","setSentiment","keywords","setKeywords","emotion","setEmotion","energy","setEnergy","colorPalette","setColorPalette","isProcessing","setIsProcessing","mediaRecorderRef","deepgramRef","streamRef","speechRecognitionRef","processText","text","trim","response","post","provider","data","color_palette","error","startRecording","window","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","interimResults","lang","onstart","onresult","event","interimTranscript","finalTranscript","i","resultIndex","results","length","isFinal","prev","onerror","onend","start","current","stream","navigator","mediaDevices","getUserMedia","audio","sampleRate","channelCount","echoCancellation","noiseSuppression","autoGainControl","getAudioTracks","forEach","track","getSettings","getConstraints","deepgram","dgConnection","listen","live","model","language","interim_results","smart_format","punctuate","endpointing","vad_events","sample_rate","encoding","multichannel","alternatives","profanity_filter","redact","diarize","filler_words","utterance_end_ms","on","Open","getReadyState","Transcript","JSON","stringify","channel","confidence","is_final","duration","parseError","Error","Warning","warning","warn","Metadata","metadata","SpeechStarted","UtteranceEnd","Close","mediaRecorder","mimeTypes","selectedMimeType","mimeType","MediaRecorder","isTypeSupported","audioBitsPerSecond","ondataavailable","size","readyState","send","onstop","alert","stopRecording","stop","state","finish","getTracks","clearData","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onStart","onStop","onClear","style","width","backgroundColor","toFixed","_c","$RefreshReg$"],"sources":["/Users/priyeshmodi/Downloads/sentiment-aura/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useCallback } from 'react';\nimport { createClient, LiveTranscriptionEvents } from '@deepgram/sdk';\nimport axios from 'axios';\nimport AuraVisualization from './components/AuraVisualization';\nimport TranscriptDisplay from './components/TranscriptDisplay';\nimport KeywordsDisplay from './components/KeywordsDisplay';\nimport Controls from './components/Controls';\nimport './styles/App.css';\n \nconst DEEPGRAM_API_KEY = process.env.REACT_APP_DEEPGRAM_API_KEY;\nconsole.log('Deepgram API Key:', DEEPGRAM_API_KEY); // Debug line\nconst BACKEND_URL = 'http://localhost:8000';\n \nfunction App() {\n  // State management\n  const [isRecording, setIsRecording] = useState(false);\n  const [transcript, setTranscript] = useState([]);\n  const [currentText, setCurrentText] = useState('');\n  const [sentiment, setSentiment] = useState(0);\n  const [keywords, setKeywords] = useState([]);\n  const [emotion, setEmotion] = useState('neutral');\n  const [energy, setEnergy] = useState(0.5);\n  const [colorPalette, setColorPalette] = useState(['#4A90E2', '#50C878', '#FFB347']);\n  const [isProcessing, setIsProcessing] = useState(false);\n \n  // Refs for media handling\n  const mediaRecorderRef = useRef(null);\n  const deepgramRef = useRef(null);\n  const streamRef = useRef(null);\n  const speechRecognitionRef = useRef(null); // Add ref for speech recognition\n \n  // Process text with backend AI\n  const processText = useCallback(async (text) => {\n    if (!text.trim() || isProcessing) return;\n    \n    console.log('Processing text with backend:', text); // Debug line\n    setIsProcessing(true);\n    try {\n      const response = await axios.post(`${BACKEND_URL}/process_text`, {\n        text: text,\n        provider: 'openai' // or 'anthropic'\n      });\n \n      const data = response.data;\n      console.log('Backend response:', data); // Debug line\n      setSentiment(data.sentiment);\n      setKeywords(data.keywords);\n      setEmotion(data.emotion);\n      setEnergy(data.energy);\n      setColorPalette(data.color_palette);\n    } catch (error) {\n      console.error('Error processing text:', error);\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [isProcessing]);\n \n  // Start recording and transcription\n  const startRecording = useCallback(async () => {\n    console.log('Starting recording...'); // Debug line\n    \n    // Try browser's built-in Speech Recognition as fallback\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      console.log('ðŸŽ¤ Using browser Speech Recognition API');\n      \n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      const recognition = new SpeechRecognition();\n      \n      recognition.continuous = true;\n      recognition.interimResults = true;\n      recognition.lang = 'en-US';\n      \n      recognition.onstart = () => {\n        console.log('ðŸŽ¬ Speech recognition started');\n        setIsRecording(true);\n      };\n      \n      recognition.onresult = (event) => {\n        console.log('ðŸŽ¯ Speech recognition result:', event);\n        \n        let interimTranscript = '';\n        let finalTranscript = '';\n        \n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          \n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n            console.log('âœ… Final transcript:', transcript);\n            setTranscript(prev => [...prev, transcript]);\n            processText(transcript);\n          } else {\n            interimTranscript += transcript;\n            console.log('ðŸ“ Interim transcript:', transcript);\n            setCurrentText(interimTranscript);\n          }\n        }\n      };\n      \n      recognition.onerror = (event) => {\n        console.error('âŒ Speech recognition error:', event.error);\n      };\n      \n      recognition.onend = () => {\n        console.log('ðŸ”Œ Speech recognition ended');\n        setIsRecording(false);\n        setCurrentText('');\n      };\n      \n      recognition.start();\n      speechRecognitionRef.current = recognition; // Store reference\n      return;\n    }\n    \n    // Fallback to Deepgram if browser doesn't support Speech Recognition\n    try {\n      // Get microphone access with different settings\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          sampleRate: 48000,      // Try higher sample rate\n          channelCount: 1,\n          echoCancellation: false, // Turn off processing that might interfere\n          noiseSuppression: false,\n          autoGainControl: false\n        }\n      });\n      console.log('Got microphone access:', stream); // Debug line\n      console.log('Audio tracks:', stream.getAudioTracks()); // Check audio tracks\n      stream.getAudioTracks().forEach(track => {\n        console.log('Track settings:', track.getSettings());\n        console.log('Track constraints:', track.getConstraints());\n      });\n      streamRef.current = stream;\n \n      // Initialize Deepgram client\n      const deepgram = createClient(DEEPGRAM_API_KEY);\n      \n      // Try different Deepgram settings\n      const dgConnection = deepgram.listen.live({\n        model: 'nova-2-general',\n        language: 'en-US',\n        interim_results: true,     \n        smart_format: true,\n        punctuate: true,\n        endpointing: 300,         // Longer endpointing - let you finish speaking\n        vad_events: true,         \n        sample_rate: 48000,       \n        encoding: 'linear16',\n        multichannel: false,      // Ensure single channel\n        alternatives: 1,          // Just one alternative\n        profanity_filter: false,  // No filtering\n        redact: false,           // No redaction\n        diarize: false,          // No speaker separation\n        filler_words: false,     // No filler word removal\n        utterance_end_ms: 1000   // Wait 1 second before finalizing\n      });\n      console.log('Created Deepgram connection with new settings'); // Debug line\n \n      deepgramRef.current = dgConnection;\n \n      // Set up Deepgram event listeners with more comprehensive logging\n      dgConnection.on(LiveTranscriptionEvents.Open, () => {\n        console.log('âœ… Deepgram connection opened successfully');\n        console.log('Connection ready state:', dgConnection.getReadyState());\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.Transcript, (data) => {\n        console.log('ðŸŽ¯ RAW transcript event received:', JSON.stringify(data, null, 2));\n        \n        // More robust data parsing\n        try {\n          if (data && data.channel && data.channel.alternatives) {\n            const alternatives = data.channel.alternatives;\n            console.log('Number of alternatives:', alternatives.length);\n            \n            if (alternatives.length > 0 && alternatives[0].transcript) {\n              const transcript = alternatives[0].transcript;\n              const confidence = alternatives[0].confidence || 0;\n              \n              console.log('ðŸ“ Transcript text:', transcript);\n              console.log('ðŸŽ¯ Confidence:', confidence);\n              console.log('âœ… Is final:', data.is_final);\n              console.log('â±ï¸ Duration:', data.duration);\n              \n              if (transcript && transcript.trim() !== '') {\n                console.log('âœ… Valid transcript found, updating UI');\n                setCurrentText(transcript);\n                \n                // If this is a final transcript, add to history and process\n                if (data.is_final) {\n                  console.log('ðŸŽ‰ Final transcript, processing:', transcript);\n                  setTranscript(prev => [...prev, transcript]);\n                  processText(transcript);\n                  setCurrentText('');\n                }\n              } else {\n                console.log('âš ï¸ Transcript is empty or whitespace');\n              }\n            } else {\n              console.log('âš ï¸ No alternatives or transcript in response');\n            }\n          } else {\n            console.log('âŒ Invalid data structure:', data);\n          }\n        } catch (parseError) {\n          console.error('âŒ Error parsing transcript data:', parseError);\n        }\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.Error, (error) => {\n        console.error('âŒ Deepgram error event:', error);\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.Warning, (warning) => {\n        console.warn('âš ï¸ Deepgram warning:', warning);\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.Metadata, (metadata) => {\n        console.log('â„¹ï¸ Deepgram metadata:', metadata);\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.SpeechStarted, () => {\n        console.log('ðŸ—£ï¸ Speech started detected');\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.UtteranceEnd, () => {\n        console.log('ðŸ”š Utterance ended');\n      });\n \n      dgConnection.on(LiveTranscriptionEvents.Close, () => {\n        console.log('ðŸ”Œ Deepgram connection closed');\n      });\n \n      // Set up MediaRecorder with different settings\n      let mediaRecorder;\n      try {\n        // Try different MIME types in order of preference\n        const mimeTypes = [\n          'audio/webm;codecs=opus',\n          'audio/webm;codecs=pcm',\n          'audio/webm',\n          'audio/ogg;codecs=opus',\n          'audio/wav'\n        ];\n        \n        let selectedMimeType = null;\n        for (const mimeType of mimeTypes) {\n          if (MediaRecorder.isTypeSupported(mimeType)) {\n            selectedMimeType = mimeType;\n            console.log('âœ… Using MIME type:', mimeType);\n            break;\n          }\n        }\n        \n        mediaRecorder = new MediaRecorder(stream, {\n          mimeType: selectedMimeType,\n          audioBitsPerSecond: 128000\n        });\n      } catch (error) {\n        console.log('âš ï¸ Falling back to default MediaRecorder settings');\n        mediaRecorder = new MediaRecorder(stream);\n      }\n      \n      console.log('ðŸŽ™ï¸ Created MediaRecorder:', mediaRecorder);\n      console.log('ðŸ“Š MediaRecorder MIME type:', mediaRecorder.mimeType);\n      \n      mediaRecorderRef.current = mediaRecorder;\n \n      mediaRecorder.ondataavailable = (event) => {\n        const size = event.data.size;\n        const readyState = dgConnection.getReadyState();\n        console.log(`ðŸ“Š Audio data: ${size} bytes, connection state: ${readyState}`);\n        \n        if (size > 0 && readyState === 1) {\n          console.log('ðŸ“¤ Sending audio data to Deepgram');\n          dgConnection.send(event.data);\n        } else if (size === 0) {\n          console.log('âš ï¸ Received empty audio data');\n        } else if (readyState !== 1) {\n          console.log('âš ï¸ Deepgram not ready, buffering data');\n        }\n      };\n \n      mediaRecorder.onerror = (error) => {\n        console.error('âŒ MediaRecorder error:', error);\n      };\n \n      mediaRecorder.onstart = () => {\n        console.log('ðŸŽ¬ MediaRecorder started');\n      };\n \n      mediaRecorder.onstop = () => {\n        console.log('ðŸ›‘ MediaRecorder stopped');\n      };\n \n      // Start recording with shorter intervals for more responsive streaming\n      mediaRecorder.start(50); // Send data every 50ms instead of 100ms\n      console.log('ðŸŽ™ï¸ MediaRecorder started with 50ms intervals');\n      setIsRecording(true);\n      \n    } catch (error) {\n      console.error('âŒ Error starting recording:', error);\n      alert('Error accessing microphone. Please check permissions.');\n    }\n  }, [processText]);\n \n  // Stop recording and cleanup\n  const stopRecording = useCallback(() => {\n    console.log('ðŸ›‘ Stopping recording...');\n    \n    // Stop browser Speech Recognition if it's running\n    if (speechRecognitionRef.current) {\n      console.log('ðŸ”‡ Stopping Speech Recognition');\n      speechRecognitionRef.current.stop();\n      speechRecognitionRef.current = null;\n    }\n    \n    // Stop Deepgram recording if it's running\n    if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {\n      mediaRecorderRef.current.stop();\n    }\n    \n    if (deepgramRef.current) {\n      deepgramRef.current.finish();\n    }\n    \n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => {\n        track.stop();\n        console.log('ðŸ”‡ Stopped audio track');\n      });\n    }\n \n    setIsRecording(false);\n    setCurrentText('');\n  }, []);\n \n  // Clear all data\n  const clearData = useCallback(() => {\n    console.log('ðŸ§¹ Clearing all data');\n    setTranscript([]);\n    setCurrentText('');\n    setSentiment(0);\n    setKeywords([]);\n    setEmotion('neutral');\n    setEnergy(0.5);\n    setColorPalette(['#4A90E2', '#50C878', '#FFB347']);\n  }, []);\n \n  return (\n    <div className=\"app\">\n      {/* Background Aura Visualization */}\n      <AuraVisualization\n        sentiment={sentiment}\n        energy={energy}\n        emotion={emotion}\n        colorPalette={colorPalette}\n        keywords={keywords}\n      />\n      \n      {/* UI Overlay */}\n      <div className=\"ui-overlay\">\n        {/* Controls */}\n        <Controls\n          isRecording={isRecording}\n          isProcessing={isProcessing}\n          onStart={startRecording}\n          onStop={stopRecording}\n          onClear={clearData}\n        />\n        \n        {/* Transcript Display */}\n        <TranscriptDisplay\n          transcript={transcript}\n          currentText={currentText}\n          sentiment={sentiment}\n          emotion={emotion}\n        />\n        \n        {/* Keywords Display */}\n        <KeywordsDisplay\n          keywords={keywords}\n          emotion={emotion}\n          energy={energy}\n        />\n        \n        {/* Status Info */}\n        <div className=\"status-info\">\n          <div className=\"sentiment-meter\">\n            <div className=\"meter-label\">Sentiment</div>\n            <div className=\"meter-bar\">\n              <div\n                className=\"meter-fill\"\n                style={{\n                  width: `${((sentiment + 1) / 2) * 100}%`,\n                  backgroundColor: sentiment > 0 ? '#4CAF50' : sentiment < 0 ? '#F44336' : '#FFC107'\n                }}\n              />\n            </div>\n            <div className=\"meter-value\">{(sentiment * 100).toFixed(0)}%</div>\n          </div>\n          \n          <div className=\"energy-meter\">\n            <div className=\"meter-label\">Energy</div>\n            <div className=\"meter-bar\">\n              <div\n                className=\"meter-fill\"\n                style={{\n                  width: `${energy * 100}%`,\n                  backgroundColor: `hsl(${energy * 120}, 70%, 50%)`\n                }}\n              />\n            </div>\n            <div className=\"meter-value\">{(energy * 100).toFixed(0)}%</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n \nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}